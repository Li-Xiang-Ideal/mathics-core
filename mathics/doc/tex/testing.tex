% -*- latex -*-

% This file can be used for troubleshooting problems.

% Adjust this file to your liking and then build using:
%    make mathics-test.pdf
\chapter{Test Chapter}
\chapterstart
\chaptersections
\section*{TestSection}
\sectionstart

Here is what we want to test:

Note that \emph{Mathics} will automatically sort the given format rules according to their ``generality'', so the rule for the empty dice does not get overridden by the rule for a series of dice.
We can still see the original form by using \code{\mbox{\lstinline'InputForm':}}
\begin{tests}%
\begin{testcase}
\test{\lstinline'Dice[1, 6, 4, 4] // InputForm'}
\begin{testresult}\text{Dice}\left[\allowbreak{}1,\allowbreak{} 4,\allowbreak{} 4,\allowbreak{} 6\right]\end{testresult}\end{testcase}%
\end{tests}
We want to combine \code{\lstinline'Dice'} objects using the \code{\lstinline'+'} operator:
\begin{tests}%
\begin{testcase}
\test{\lstinline'Dice[a\_\_\_] + Dice[b\_\_\_] ^:= Dice[Sequence @@ \{a, b\}]'}
\end{testcase}%
\end{tests}
The \code{\lstinline'\^:='} (\code{\lstinline'UpSetDelayed'}) tells \emph{Mathics} to associate this rule with \code{\lstinline'Dice'} instead of \code{\mbox{\lstinline'Plus',}} which is protected---we would have to unprotect it first:
\begin{tests}%
\begin{testcase}
\test{\lstinline'Dice[a\_\_\_] + Dice[b\_\_\_] := Dice[Sequence @@ \{a, b\}]'}
\begin{testmessage}Tag Plus in Dice[a\_\_\_] + Dice[b\_\_\_] is Protected.\end{testmessage}\begin{testresult}\text{\$Failed}\end{testresult}\end{testcase}%
\end{tests}
We can now combine dice:
\sectionend
\chapterend
